# EAI Schema Toolkit - Kiro Agent Hooks 설정 가이드

## Agent Hooks 개요

Kiro Agent Hooks는 IDE에서 특정 이벤트가 발생할 때 자동으로 실행되는 AI 어시스턴트 액션입니다. 이를 통해 개발 워크플로우를 자동화하고 일관된 코드 품질을 유지할 수 있습니다.

## EAI Schema Toolkit을 위한 권장 Agent Hooks

### 1. TypeScript 파일 저장 시 코드 품질 검사

**트리거**: 파일 저장 (*.ts, *.tsx)
**프롬프트**:
```
EAI Schema Toolkit의 개발 가이드라인을 참조하여 저장된 TypeScript 파일을 검토해주세요:

1. 타입 안전성 검사:
   - any 타입 사용 여부 확인
   - 적절한 타입 정의 여부
   - null/undefined 처리

2. 코드 품질 검사:
   - ESLint 규칙 준수
   - 적절한 에러 처리
   - 로깅 사용 (console.log 대신 Winston)

3. 보안 검사:
   - 입력 검증 로직
   - SQL 인젝션 방지
   - XSS 방지

4. 성능 검사:
   - 비동기 처리 패턴
   - 메모리 누수 가능성
   - 불필요한 연산

검토 결과를 한국어로 요약하고 개선 제안을 제공해주세요.
```

### 2. API 라우터 파일 생성 시 보안 체크리스트 적용

**트리거**: 새 파일 생성 (src/routes/*.ts)
**프롬프트**:
```
새로 생성된 API 라우터 파일에 EAI Schema Toolkit의 보안 가이드라인을 적용해주세요:

1. 필수 보안 요소 확인:
   - 입력 검증 미들웨어
   - 레이트 리미팅
   - CORS 설정
   - 인증/권한 검사

2. 에러 처리 패턴:
   - try-catch 블록
   - 적절한 HTTP 상태 코드
   - 에러 로깅

3. API 설계 원칙:
   - RESTful 패턴
   - 일관된 응답 형식
   - 적절한 HTTP 메서드

누락된 보안 요소가 있다면 코드 예시와 함께 제안해주세요.
```

### 3. 스키마 처리 파일 수정 시 검증 로직 확인

**트리거**: 파일 저장 (src/services/*Schema*.ts, src/services/*Validation*.ts)
**프롬프트**:
```
스키마 처리 관련 파일이 수정되었습니다. EAI Schema Toolkit의 스키마 처리 가이드라인을 확인해주세요:

1. XML 처리 보안:
   - XXE (XML External Entity) 공격 방지
   - DTD 처리 비활성화
   - 외부 엔티티 참조 차단

2. JSON 스키마 검증:
   - AJV 스키마 검증 사용
   - 적절한 스키마 정의
   - 에러 메시지 처리

3. YAML 처리:
   - 안전한 파싱 옵션
   - 타입 검증
   - 크기 제한

4. 성능 최적화:
   - 스트림 처리 사용
   - 메모리 효율성
   - 캐싱 전략

검증 로직의 완성도를 평가하고 개선점을 제안해주세요.
```

### 4. 테스트 파일 생성 시 테스트 가이드라인 적용

**트리거**: 새 파일 생성 (*test*.ts, *.spec.ts)
**프롬프트**:
```
새로운 테스트 파일이 생성되었습니다. EAI Schema Toolkit의 테스트 가이드라인을 적용해주세요:

1. 테스트 구조:
   - describe/it 블록 구조
   - Given-When-Then 패턴
   - 적절한 테스트 이름

2. 테스트 커버리지:
   - 성공 케이스
   - 실패 케이스
   - 경계값 테스트
   - 에러 처리 테스트

3. 모킹 전략:
   - 외부 의존성 모킹
   - 데이터베이스 모킹
   - API 호출 모킹

4. 보안 테스트:
   - 입력 검증 테스트
   - 인증/권한 테스트
   - SQL 인젝션 테스트

누락된 테스트 케이스가 있다면 예시 코드와 함께 제안해주세요.
```

### 5. 환경 설정 파일 수정 시 보안 검토

**트리거**: 파일 저장 (.env*, config/*.ts, *.config.js)
**프롬프트**:
```
환경 설정 파일이 수정되었습니다. 보안 관점에서 검토해주세요:

1. 민감 정보 관리:
   - API 키, 비밀번호 하드코딩 여부
   - 환경 변수 사용 권장
   - .env 파일 .gitignore 포함 확인

2. 설정 검증:
   - 필수 환경 변수 확인
   - 기본값 설정
   - 타입 검증

3. 보안 설정:
   - CORS 설정
   - 레이트 리미팅
   - 세션 보안

4. 프로덕션 준비:
   - 디버그 모드 비활성화
   - 로그 레벨 설정
   - 성능 최적화 옵션

보안 위험이 있는 설정이 발견되면 개선 방안을 제안해주세요.
```

## Agent Hooks 설정 방법

### VS Code에서 설정하기

1. **Kiro 패널 열기**
   - VS Code에서 Kiro 확장 프로그램 설치
   - 사이드바에서 Kiro 아이콘 클릭

2. **Agent Hooks 섹션으로 이동**
   - Kiro 패널에서 "Agent Hooks" 섹션 찾기
   - "+" 버튼 클릭하여 새 훅 생성

3. **훅 설정**
   - 트리거 이벤트 선택 (파일 저장, 생성, 삭제)
   - 파일 패턴 지정 (예: `src/**/*.ts`)
   - 위의 프롬프트 중 적절한 것을 입력

4. **훅 활성화**
   - 설정 완료 후 "Save" 클릭
   - 훅이 자동으로 활성화됨

### Command Palette 사용하기

1. `Cmd + Shift + P` (Mac) 또는 `Ctrl + Shift + P` (Windows/Linux)
2. "Kiro: Open Kiro Hook UI" 입력
3. 화면 지시에 따라 훅 설정

## 훅 관리 모범 사례

### 1. 점진적 도입
- 처음에는 1-2개의 기본 훅부터 시작
- 팀이 익숙해지면 점진적으로 추가
- 너무 많은 훅은 개발 속도를 저하시킬 수 있음

### 2. 팀 표준화
- 팀 전체가 동일한 훅 설정 사용
- 프로젝트별 커스터마이징
- 정기적인 훅 설정 리뷰

### 3. 성능 고려
- 너무 복잡한 프롬프트는 응답 시간 증가
- 자주 발생하는 이벤트에는 간단한 체크만
- 필요시 훅 비활성화 옵션 활용

### 4. 피드백 수집
- 개발자들의 훅 사용 경험 수집
- 불필요하거나 방해되는 훅 제거
- 유용한 훅은 다른 프로젝트에도 적용

## 문제 해결

### 훅이 실행되지 않는 경우
1. Kiro 확장 프로그램 활성화 확인
2. 파일 패턴 매칭 확인
3. 훅 설정에서 활성화 상태 확인

### 응답이 느린 경우
1. 프롬프트 길이 단축
2. 체크 항목 수 줄이기
3. 네트워크 연결 상태 확인

### 부정확한 응답이 나오는 경우
1. 프롬프트를 더 구체적으로 작성
2. 프로젝트 컨텍스트 정보 추가
3. 예시 코드 포함

이러한 Agent Hooks를 통해 EAI Schema Toolkit 개발 시 일관된 코드 품질과 보안 표준을 자동으로 유지할 수 있습니다.