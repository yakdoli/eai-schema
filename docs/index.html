<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>EAI Schema Toolkit</title>
        <link rel="stylesheet" href="style.css" />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
    </head>
    <body>
        <div class="container">
            <header class="header">
                <h1><i class="fas fa-code-branch"></i> EAI Schema Toolkit</h1>
                <p class="subtitle">스키마 변환 및 검증 도구</p>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox">
                        <input type="checkbox" id="checkbox" />
                        <div class="slider round"></div>
                    </label>
                </div>
            </header>

            <main class="main-content">
                <!-- 업로드 섹션 -->
                <section class="upload-section">
                    <div class="upload-tabs">
                        <button
                            class="tab-button active"
                            data-tab="file-upload"
                        >
                            파일 업로드
                        </button>
                        <button class="tab-button" data-tab="url-upload">
                            URL에서 가져오기
                        </button>
                        <button class="tab-button" data-tab="message-mapping">
                            메시지 매핑
                        </button>
                    </div>

                    <!-- 파일 업로드 탭 -->
                    <div id="file-upload" class="tab-content active">
                        <div class="drop-zone" id="dropZone">
                            <div class="drop-zone-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>
                                    파일을 드래그 앤 드롭하거나 클릭하여
                                    선택하세요
                                </p>
                                <p class="file-info">
                                    지원 형식: XML, JSON, YAML (최대 50MB)
                                </p>
                                <input
                                    type="file"
                                    id="fileInput"
                                    accept=".xml,.json,.yaml,.yml"
                                    hidden
                                />
                            </div>
                        </div>
                        <button class="btn btn-primary" id="uploadBtn" disabled>
                            <i class="fas fa-upload"></i> 업로드
                        </button>
                    </div>

                    <!-- URL 업로드 탭 -->
                    <div id="url-upload" class="tab-content">
                        <div class="url-input-container">
                            <input
                                type="url"
                                id="urlInput"
                                placeholder="스키마 URL을 입력하세요 (예: https://example.com/schema.xml)"
                            />
                            <button class="btn btn-primary" id="fetchBtn">
                                <i class="fas fa-download"></i> 가져오기
                            </button>
                        </div>
                    </div>

                    <!-- 메시지 매핑 탭 -->
                    <div id="message-mapping" class="tab-content">
                        <div class="eai-work-tool-layout">
                            <!-- 상단 섹션들 -->
                            <div class="top-sections">
                                <div class="section-box" id="configuration">
                                    <h4><i class="fas fa-cogs"></i> Configuration</h4>
                                    <div class="section-content">
                                        <div class="config-fields">
                                            <div class="field-group">
                                                <label for="messageType">Message Type:</label>
                                                <select id="messageType">
                                                    <option value="XML">XML</option>
                                                    <option value="JSON">JSON</option>
                                                    <option value="YAML">YAML</option>
                                                </select>
                                            </div>
                                            <div class="field-group">
                                                <label for="dataType">Data Type:</label>
                                                <input type="text" id="dataType" placeholder="Enter data type" />
                                            </div>
                                            <div class="field-group">
                                                <label for="rootElement">Root Element:</label>
                                                <input type="text" id="rootElement" placeholder="Root element name" />
                                            </div>
                                            <div class="field-group">
                                                <label for="namespace">Namespace:</label>
                                                <input type="text" id="namespace" placeholder="XML namespace URI" />
                                            </div>
                                            <div class="field-group">
                                                <label for="encoding">Encoding:</label>
                                                <select id="encoding">
                                                    <option value="UTF-8">UTF-8</option>
                                                    <option value="UTF-16">UTF-16</option>
                                                    <option value="ISO-8859-1">ISO-8859-1</option>
                                                </select>
                                            </div>
                                            <div class="field-group">
                                                <label for="version">Version:</label>
                                                <input type="text" id="version" placeholder="1.0" value="1.0" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="section-box" id="source">
                                    <h4><i class="fas fa-code"></i> Source</h4>
                                    <div class="section-content">
                                        <textarea id="sourceInput" placeholder="Enter source data here (JSON, XML, or plain text)..." rows="8"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- 중간 섹션들 -->
                            <div class="middle-sections">
                                <div class="section-box" id="messageType">
                                    <h4><i class="fas fa-envelope"></i> Message Type</h4>
                                    <div class="section-content">
                                        <div class="message-type-selector">
                                            <button class="msg-type-btn active" data-type="XML">XML</button>
                                            <button class="msg-type-btn" data-type="JSON">JSON</button>
                                            <button class="msg-type-btn" data-type="YAML">YAML</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="section-box" id="dataType">
                                    <h4><i class="fas fa-database"></i> Data Type</h4>
                                    <div class="section-content">
                                        <input type="text" id="dataTypeInput" placeholder="Specify data type" readonly />
                                        <small class="field-help">Auto-populated from Configuration</small>
                                    </div>
                                </div>

                                <div class="section-box" id="statement">
                                    <h4><i class="fas fa-terminal"></i> Statement</h4>
                                    <div class="section-content">
                                        <textarea id="statementInput" placeholder="SQL query, XSLT, or processing statement" rows="4"></textarea>
                                        <small class="field-help">Optional processing instructions</small>
                                    </div>
                                </div>

                                <div class="section-box" id="testData">
                                    <h4><i class="fas fa-flask"></i> Test Data</h4>
                                    <div class="section-content">
                                        <textarea id="testDataInput" placeholder="Sample data for validation and testing" rows="4"></textarea>
                                        <small class="field-help">Used for validation and preview</small>
                                    </div>
                                </div>

                                <div class="section-box" id="messageMapping">
                                    <h4><i class="fas fa-sitemap"></i> Message Mapping</h4>
                                    <div class="section-content">
                                        <div class="mapping-rules" id="mappingRules">
                                            <div class="mapping-placeholder">
                                                <i class="fas fa-project-diagram"></i>
                                                <p>Mapping rules will be generated</p> here...</p>
                                                <small>Click Generate to create mappings</small></small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 액션 버튼들 -->
                            <div class="action-buttons">
                                <button class="btn btn-primary action-btn" id="generateMappingBtn">
                                    <i class="fas fa-play"></i> Generate
                                </button>
                                <button class="btn btn-warning action-btn" id="validateMappingBtn">
                                    <i class="fas fa-check-circle"></i> Validate
                                </button>
                                <button class="btn btn-secondary action-btn" id="clearMappingBtn">
                                    <i class="fas fa-trash"></i> Clear
                                </button>
                            </div>

                            <!-- 결과 섹션 -->
                            <div class="result-section" id="resultSection" style="display: none;">
                                <div class="section-box result-box">
                                    <h4><i class="fas fa-chart-bar"></i> Result</h4>
                                    <div class="section-content">
                                        <div class="result-tabs">
                                            <button class="result-tab-btn active" data-tab="xml">XML</button>
                                            <button class="result-tab-btn" data-tab="json">JSON</button>
                                            <button class="result-tab-btn" data-tab="preview">Preview</button>
                                            <button class="result-tab-btn" data-tab="mapping">Mapping</button>
                                        </div>
                                        <div class="result-content">
                                            <div id="xmlResult" class="result-panel active">
                                                <pre id="xmlOutput"></pre>
                                            </div>
                                            <div id="jsonResult" class="result-panel">
                                                <pre id="jsonOutput"></pre>
                                            </div>
                                            <div id="previewResult" class="result-panel">
                                                <div id="previewContent"></div>
                                            </div>
                                            <div id="mappingResult" class="result-panel">
                                                <pre id="mappingOutput"></pre>
                                            </div>
                                        </div>
                                        <div class="result-actions">
                                            <button class="btn btn-success" id="downloadResultBtn">
                                                <i class="fas fa-download"></i> Download
                                            </button>
                                            <button class="btn btn-info" id="copyResultBtn">
                                                <i class="fas fa-copy"></i> Copy
                                            </button>
                                            <button class="btn btn-outline-primary" id="shareResultBtn">
                                                <i class="fas fa-share"></i> Share
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 로딩 상태 -->
                <div
                    class="loading-container"
                    id="loadingContainer"
                    style="display: none"
                >
                    <div class="loading-spinner"></div>
                    <p>처리 중...</p>
                </div>

                <!-- 메시지 매핑 결과 섹션 -->
                <section
                    class="mapping-result-section"
                    id="mappingResultSection"
                    style="display: none"
                >
                    <h2><i class="fas fa-code-branch"></i> 메시지 매핑 결과</h2>
                    <div class="mapping-result-card">
                        <div class="result-tabs">
                            <button class="result-tab active" data-result-tab="xml">XML 결과</button>
                            <button class="result-tab" data-result-tab="json">JSON 결과</button>
                            <button class="result-tab" data-result-tab="summary">요약</button>
                        </div>

                        <div class="result-content">
                            <div id="xml-result" class="result-panel active">
                                <pre id="xmlOutput" class="xml-output"></pre>
                            </div>
                            <div id="json-result" class="result-panel">
                                <pre id="jsonOutput" class="json-output"></pre>
                            </div>
                            <div id="summary-result" class="result-panel">
                                <div class="summary-grid">
                                    <div class="summary-item">
                                        <span class="summary-label">생성된 노드 수:</span>
                                        <span class="summary-value" id="nodeCount">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">XML 크기:</span>
                                        <span class="summary-value" id="xmlSize">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">처리 시간:</span>
                                        <span class="summary-value" id="processTime">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">유효성:</span>
                                        <span class="summary-value" id="validationStatus">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="actions">
                        <button class="btn btn-success" id="downloadXmlResultBtn">
                            <i class="fas fa-download"></i> XML 다운로드
                        </button>
                        <button class="btn btn-info" id="copyXmlResultBtn">
                            <i class="fas fa-copy"></i> 복사
                        </button>
                        <button class="btn btn-secondary" id="newMappingBtn">
                            <i class="fas fa-plus"></i> 새 매핑
                        </button>
                    </div>
                </section>

                <!-- 결과 섹션 -->
                <section
                    class="results-section"
                    id="resultsSection"
                    style="display: none"
                >
                    <h2><i class="fas fa-check-circle"></i> 업로드 완료</h2>
                    <div class="file-info-card" id="fileInfoCard">
                        <!-- 파일 정보가 여기에 표시됩니다 -->
                    </div>

                    <div class="actions">
                        <button class="btn btn-secondary" id="downloadBtn">
                            <i class="fas fa-download"></i> 다운로드
                        </button>
                        <button class="btn btn-danger" id="deleteBtn">
                            <i class="fas fa-trash"></i> 삭제
                        </button>
                        <button class="btn btn-info" id="newUploadBtn">
                            <i class="fas fa-plus"></i> 새 업로드
                        </button>
                    </div>
                </section>

                <!-- 업로드된 파일 목록 -->
                <section class="files-list-section">
                    <h2><i class="fas fa-list"></i> 업로드된 파일</h2>
                    <div class="files-container" id="filesContainer">
                        <p class="no-files">업로드된 파일이 없습니다.</p>
                    </div>
                    <button class="btn btn-secondary" id="refreshFilesBtn">
                        <i class="fas fa-refresh"></i> 새로고침
                    </button>
                </section>
            </main>

            <!-- 알림 토스트 -->
            <div class="toast" id="toast">
                <div class="toast-content">
                    <i class="toast-icon"></i>
                    <span class="toast-message"></span>
                </div>
            </div>

            <!-- 설정 모달 -->
            <div class="modal" id="settingsModal" style="display: none">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-cog"></i> 설정</h3>
                        <button class="modal-close" id="closeSettingsModal">
                            &times;
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="setting-group">
                            <label for="apiUrl">API 서버 URL:</label>
                            <input
                                type="url"
                                id="apiUrl"
                                placeholder="http://localhost:3001"
                            />
                            <small>백엔드 API 서버의 URL을 입력하세요</small>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="cancelSettings">
                            취소
                        </button>
                        <button class="btn btn-primary" id="saveSettings">
                            저장
                        </button>
                    </div>
                </div>
            </div>

            <footer class="footer">
                <p>&copy; 2024 EAI Schema Toolkit. All rights reserved.</p>
                <button class="settings-btn" id="settingsBtn" title="설정">
                    <i class="fas fa-cog"></i>
                </button>
            </footer>
        </div>

        <script src="script.js"></script>
    </body>
</html>
